<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>CRUD JS</title>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
		<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" /> -->
		<script src="https://cdn.tailwindcss.com"></script>
		<style>
			@media screen and (max-width: 630px) {
				.table-container {
					overflow-x: auto;
				}
			}
		</style>
	</head>
	<body>
		<div class="container mx-auto">
			<h1 class="text-2xl md:text-3xl lg:text-4xl text-center font-medium text-black py-8 bg-blue-200">CRUD Application in <span class="text-indigo-600">JavaScript</span></h1>
			<a href="" class="absolute top-0 right-0">View code</a>

			<div class="flex flex-col xl:flex-row py-5 text-lg">
				<div class="text-center xl:w-2/5 p-4">
					<div>
						<h2 class="text-indigo-600 font-medium text-2xl pb-5">User Detail</h2>
						<input
							class="block w-full mb-4 p-2 border border-gray-500 rounded-none focus:ring focus:ring-indigo-300 focus:outline-none"
							type="text"
							placeholder="Enter your name"
							required
							id="userName"
						/>
						<input
							class="block w-full mb-4 p-2 border border-gray-500 rounded-none focus:ring focus:ring-indigo-300 focus:outline-none"
							type="email"
							pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}"
							placeholder="Enter your email"
							required
							id="userEmail"
						/>
						<input
							class="block w-full mb-4 p-2 border border-gray-500 rounded-none focus:ring focus:ring-indigo-300 focus:outline-none"
							type="password"
							placeholder="Enter your password"
							required
							id="userPassword"
						/>
						<div class="flex items-center flex-wrap mb-4">
							<label for="gender" class="mr-4">Gender : </label>
							<label for="male"> <input type="radio" id="male" name="gender" value="Male" class="mr-1" /> Male</label>
							<label for="female"> <input type="radio" id="female" name="gender" value="Female" class="ml-4 mr-1" /> Female</label>
						</div>
						<div class="mb-4">
							<div class="flex items-center flex-wrap">
								<label for="hobbies" class="mr-4">Hobbies : </label>
								<label for="driving" class="mr-4"> <input type="checkbox" id="driving" name="hobbies" value="Driving" class="mr-1" /> Driving</label>
								<label for="cycling" class="mr-4"> <input type="checkbox" id="cycling" name="hobbies" value="Cycling" class="mr-1" /> Cycling</label>
								<label for="coding"> <input type="checkbox" id="coding" name="hobbies" value="Coding" class="mr-1" /> Coding</label>
							</div>
						</div>
						<div class="mb-4">
							<select name="course" id="course" class="block w-full p-2 border border-gray-500 rounded-none focus:ring focus:ring-indigo-300 focus:outline-none">
								<option value="" disabled selected>Select a course</option>
								<option value="full-stack">Full Stack</option>
								<option value="android">Android</option>
								<option value="animation">Animation</option>
								<option value="figma">Figma</option>
							</select>
						</div>
						<p id="InputIsEmptyMessage" class="text-left text-red-600 text-xl"></p>
						<button type="submit" class="block w-full border border-indigo-500 text-lg py-2 px-6 bg-indigo-600 text-white hover:bg-white hover:text-indigo-400" onclick="addUser()">
							Add user
						</button>
					</div>
				</div>

				<div class="xl:w-3/5 p-4">
					<div class="text-center">
						<h2 class="text-indigo-600 font-medium text-2xl pb-5">User Table</h2>
						<div class="table-container overflow-x-auto">
							<table class="table-auto border border-gray-500 mx-auto w-full">
								<thead>
									<tr>
										<th class="sm:w-1/6 md:w-1/6 lg:w-1/6 xl:w-1/6 border border-gray-500 px-2 py-2">UserName</th>
										<th class="sm:w-1/6 md:w-1/6 lg:w-1/6 xl:w-1/6 border border-gray-500 px-2 py-2">Email</th>
										<th class="sm:w-1/6 md:w-1/6 lg:w-1/6 xl:w-1/6 border border-gray-500 px-2 py-2">Password</th>
										<th class="sm:w-1/6 md:w-1/6 lg:w-1/6 xl:w-1/6 border border-gray-500 px-2 py-2">Gender</th>
										<th class="sm:w-1/6 md:w-1/6 lg:w-1/6 xl:w-1/6 border border-gray-500 px-2 py-2">Hobbies</th>
										<th class="sm:w-1/6 md:w-1/6 lg:w-1/6 xl:w-1/6 border border-gray-500 px-2 py-2">course</th>
										<th class="sm:w-1/6 md:w-1/6 lg:w-1/6 xl:w-1/6 border border-gray-500 px-2 py-2">Actions</th>
									</tr>
								</thead>
								<tbody class="js-user-list">
									<!-- <tr>
									<td class="border border-gray-500 px-4 py-2"></td>
									<td class="border border-gray-500 px-4 py-2"></td>
									<td class="border border-gray-500 px-4 py-2"></td>
									<td class="border border-gray-500 px-4 py-2">
										<button class="border border-blue-500 text-lg py-2 px-6 bg-blue-600 text-white hover:bg-white hover:text-blue-400">
											<i class="fa-solid fa-pen-to-square"></i>
										</button>
										<button class="border border-red-500 text-lg py-2 px-6 bg-red-600 text-white hover:bg-white hover:text-red-400">
											<i class="fa-solid fa-trash"></i>
										</button>
									</td>
								</tr> -->
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script>
			const addUser = () => {
				const userNameInput = document.getElementById("userName")
				const userEmailInput = document.getElementById("userEmail")
				const userPasswordInput = document.getElementById("userPassword")

				const userName = userNameInput.value
				const userEmail = userEmailInput.value
				const userPassword = userPasswordInput.value

				const genderInput = document.querySelector('input[name="gender"]:checked')
				const gender = genderInput ? genderInput.value : ""
				const hobbiesInputs = document.querySelectorAll('input[name="hobbies"]:checked')
				const hobbies = Array.from(hobbiesInputs)
					.map((hobby) => hobby.value)
					.join(", ")
				const course = document.getElementById("course").value

				const newRowHTML = `
					<tr>
						<td class="border border-gray-500 px-2 py-2">${userName}</td>
						<td class="border border-gray-500 px-2 py-2">${userEmail}</td>
						<td class="border border-gray-500 px-2 py-2">${userPassword}</td>
						<td class="border border-gray-500 px-2 py-2">${gender}</td>
						<td class="border border-gray-500 px-2 py-2">${hobbies}</td>
						<td class="border border-gray-500 px-2 py-2">${course}</td>
						<td class="border border-gray-500 px-2 py-2">
							<button class="border border-blue-500 text-lg py-2 px-6 bg-blue-600 text-white hover:bg-white hover:text-blue-400" onclick="editUser(this)">
								<i class="fa-solid fa-pen-to-square"></i>
							</button>
							<button class="border border-red-500 text-lg py-2 px-6 bg-red-600 text-white hover:bg-white hover:text-red-400" onclick="deleteUser(this)">
								<i class="fa-solid fa-trash"></i>
							</button>
						</td>
					</tr>
				`

				const InputIsEmptyMessage = document.getElementById("InputIsEmptyMessage")
				if (userName === "" || userEmail === "" || userPassword === "" || gender === "" || hobbies === "" || course === "") {
					InputIsEmptyMessage.innerHTML = `Please enter all user information`
				} else {
					InputIsEmptyMessage.innerHTML = ``

					document.querySelector(".js-user-list").insertAdjacentHTML("beforeend", newRowHTML)

					userNameInput.value = ""
					userEmailInput.value = ""
					userPasswordInput.value = ""
					genderInput.checked = false
					hobbiesInputs.forEach((hobby) => (hobby.checked = false))
					document.getElementById("course").value = ""
				}
			}

			const editUser = (button) => {
				const rowToEdit = button.closest("tr")
				const cells = rowToEdit.getElementsByTagName("td")

				const existingUserName = cells[0].innerHTML
				const existingUserEmail = cells[1].innerHTML
				const existingUserPassword = cells[2].innerHTML
				const existingUserGender = cells[3].innerHTML
				const existingUserHobbies = cells[4].innerHTML
				const existingUserCourse = cells[5].innerHTML

				document.getElementById("userName").value = existingUserName
				document.getElementById("userEmail").value = existingUserEmail
				document.getElementById("userPassword").value = existingUserPassword

				const genderInputs = document.getElementsByName("gender")
				genderInputs.forEach((input) => {
					input.checked = input.value === existingUserGender
				})

				const hobbiesInputs = document.getElementsByName("hobbies")
				const existingHobbies = existingUserHobbies.split(", ")
				hobbiesInputs.forEach((input) => {
					input.checked = existingHobbies.includes(input.value)
				})

				document.getElementById("course").value = existingUserCourse

				rowToEdit.remove()
			}

			const deleteUser = (button) => {
				const rowDelete = button.closest("tr")
				rowDelete.remove()
			}
		</script>
	</body>
</html>
